<div class="page-content">

  <div class="card-title">
    <h1>Pessoas</h1>
  </div>

  <div class="search-form-container card">
    <div class="container mt-5 text-center text-light">

      <!-- üîç BUSCA RANSACK -->
      <%= search_form_for @q, url: pessoas_path, method: :get, class: "mb-4" do |f| %>   <!-- üîç M√âTODO DE BUSCA, SEM ESSA LINHA O CAMPO DE BUSCA SOME-->
        <div class="row g-2">

          <div class="col-md-4">
            <%= f.search_field :nome_cont,
                  class: "form-control",
                  placeholder: "Buscar por nome" %>
          </div>

          <div class="col-md-4">
            <%= f.search_field :cpf_cont,
                  class: "form-control",
                  placeholder: "Buscar por CPF" %>
          </div>

          <div class="col-md-4">
            <%= f.search_field :email_cont,
                  class: "form-control",
                  placeholder: "Buscar por e-mail" %>
          </div>

          <div class="col-md-12 d-flex gap-2 mt-2 justify-content-end">
            <%= f.submit "Pesquisar", class: "btn btn-primary" %>
            <%= link_to "Limpar", pessoas_path, class: "btn btn-secondary" %>
          </div>

        </div>
      <% end %>
      <!-- üîç FIM BUSCA -->

      <div class="d-flex justify-content-end mb-3">
        <%= link_to new_pessoa_path, class: "btn btn-success" do %>
          <i class="fas fa-plus-circle"></i> Nova Pessoa
        <% end %>
      </div>

      <% if @pessoas.any? %>
        <div class="table-responsive">
          <table class="table table-dark table-hover align-middle mb-0">

            <thead>
              <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>E-mail</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>

            <tbody>
              <% @pessoas.each do |pessoa| %>
                <tr>
                  <td><%= pessoa.nome %></td>
                  <td><%= pessoa.cpf %></td>
                  <td><%= pessoa.email %></td>
                  <td>
                    <%= link_to "Ver", pessoa, class: "btn btn-sm btn-primary" %>
                    <%= link_to "Editar", edit_pessoa_path(pessoa), class: "btn btn-sm btn-warning" %>
                    <%= link_to "Excluir", pessoa,
                          method: :delete,
                          data: { confirm: "Tem certeza?" },
                          class: "btn btn-sm btn-danger" %>
                  </td>
                </tr>
              <% end %>
            </tbody>

          </table>
        </div>
      <% else %>
        <p class="mt-3">
          Nenhuma pessoa cadastrada ainda.
          <strong>Clique em "Nova Pessoa" acima para come√ßar!</strong>
        </p>
      <% end %>

    </div>
  </div>
</div>
